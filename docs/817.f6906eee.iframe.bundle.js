"use strict";(self.webpackChunkh5p_editor_topic_map=self.webpackChunkh5p_editor_topic_map||[]).push([[817],{"./.storybook/helpers/h5p.utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Fr:()=>semantics,f:()=>params,qm:()=>parent});var _src_types_ArrowType__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/types/ArrowType.ts"),_src_types_ColorTheme__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/types/ColorTheme.ts");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var params={topicMapItems:[{heightPercentage:100,widthPercentage:100,id:"box-1",label:"Label 1",xPercentagePosition:0,yPercentagePosition:0,topicImage:{path:"",alt:""},dialog:{hasNote:!0,links:[{id:"link-1",label:"Example",url:"https://example.com"},{id:"link-2",label:"Example 2",url:"https://example.com/2"}]},description:""},{heightPercentage:100,widthPercentage:100,id:"box-2",label:"Label 2",xPercentagePosition:0,yPercentagePosition:0,topicImage:void 0,description:""}],arrowItems:[{id:"arrow-1",dialog:{hasNote:!0,links:[{id:"link-3",label:"Example",url:"https://example.com"},{id:"link-4",label:"Example 2",url:"https://example.com/2"}]},arrowType:_src_types_ArrowType__WEBPACK_IMPORTED_MODULE_0__.n.Directional,startElementId:"box-1",endElementId:"box-2",label:"",startPosition:{x:0,y:0},endPosition:{x:0,y:0},startGridPosition:{x:0,y:0},endGridPosition:{x:0,y:0},breakpoints:[],relativeBreakpoints:[]}],colorTheme:_src_types_ColorTheme__WEBPACK_IMPORTED_MODULE_1__.U.Blue},semantics={label:"Topic map editor",name:"topicMap",type:"group",widget:"topicMap",importance:"high",fields:[{label:"Topic map items",name:"topicMapItems",type:"list",entity:"Topic map item",importance:"low",field:{label:"Item",name:"topicMapItem",importance:"low",type:"group",fields:[{name:"id",label:"Id",type:"text",widget:"none"},{name:"xPercentagePosition",label:"X-position as a percentage of the container width",type:"number",widget:"none"},{name:"yPercentagePosition",label:"Y-position as a percentage of the container height",type:"number",widget:"none"},{name:"widthPercentage",label:"Width as a percentage of the container width",type:"number",widget:"none"},{name:"heightPercentage",label:"Height as a percentage of the container height",type:"number",widget:"none"},{label:"Label",description:"The label is shown on top of the background image",name:"label",type:"text"},{label:"Description",description:"The description is shown on top of the background image, below the label",name:"description",type:"text",optional:!0},{label:"Topic image",description:"Background image for card and image above text in dialog",name:"topicImage",type:"image"},{label:"Topic image alt text",description:"Alternative text for the image that is used by screen readers",name:"topicImageAltText",type:"text",optional:!0},{label:"Dialog",name:"dialog",type:"group",fields:[{label:"Text",name:"text",type:"text",widget:"html",optional:!0},{label:"Video",name:"video",type:"video",optional:!0},{label:"Audio",name:"audio",type:"group",optional:!0,importance:"low",fields:[{label:"Audio",name:"audioFile",type:"audio"},{label:"Subtext",name:"subtext",type:"text",widget:"html",optional:!0}]},{label:"Links",name:"links",description:"These links are as auxiliary links for the user in the element's modal window",type:"list",optional:!0,entity:"linkItem",field:{label:"Link",name:"link",type:"group",fields:[{label:"Id",name:"id",type:"text",widget:"uuid"},{label:"Label",name:"label",type:"text"},{label:"Url",name:"url",type:"text"}]}}]},{label:"Index",description:"⚠️ Advanced feature: Used for manually setting tab order.",name:"index",type:"number",optional:!0}]}},{label:"Arrows",name:"arrowItems",type:"list",entity:"arrowItem",field:{label:"Arrow",name:"arrow",type:"group",fields:[{name:"id",label:"Id",type:"text",widget:"none"},{name:"startElementId",label:"Id of start element",type:"text",widget:"none"},{name:"endElementId",label:"Id of end element",type:"text",widget:"none"},{label:"Label",description:"The label is used by screen readers and on the summary page",name:"label",type:"text",widget:"none"},{label:"Description",description:"The description is shown on top of the background image, below the label",name:"description",type:"text",optional:!0},{label:"Topic image",description:"Image above text in dialog",name:"topicImage",type:"image"},{label:"Topic image alt text",description:"Alternative text for the image that is used by screen readers",name:"topicImageAltText",type:"text",optional:!0},{label:"Show start arrow-head",name:"showStartHead",type:"boolean",widget:"none",default:!1},{label:"Show end arrow-head",name:"showEndHead",type:"boolean",widget:"none",default:!0},{label:"Dialog",name:"dialog",type:"group",fields:[{label:"Text",name:"text",type:"text",widget:"html",optional:!0},{label:"Video",name:"video",type:"video",optional:!0},{label:"Audio",name:"audio",type:"group",optional:!0,importance:"low",fields:[{label:"Audio",name:"audioFile",type:"audio"},{label:"Subtext",name:"subtext",type:"text",widget:"html",optional:!0}]},{label:"Links",name:"links",description:"These links are as auxiliary links for the user in the element's modal window",type:"list",optional:!0,entity:"linkItem",field:{label:"Link",name:"link",type:"group",fields:[{label:"Id",name:"id",type:"text",widget:"uuid"},{label:"Label",name:"label",type:"text"},{label:"Url",name:"url",type:"text"}]}}]},{label:"Index",name:"index",type:"number",optional:!0,widget:"none"}]}},{label:"Background image",name:"gridBackgroundImage",type:"image",optional:!0},{label:"Appearance",name:"appearance",type:"group",importance:"low",widget:"none",fields:[{label:"Color theme",name:"colorTheme",type:"select",default:_src_types_ColorTheme__WEBPACK_IMPORTED_MODULE_1__.U.Blue,options:Object.entries(_src_types_ColorTheme__WEBPACK_IMPORTED_MODULE_1__.U).map((function(_ref){var _ref2=_slicedToArray(_ref,2);return{label:_ref2[0],value:_ref2[1]}}))}]}]},parent={params:{topicMap:{topicMapItems:[{id:"6133281e-7b52-408b-a66c-0878fd839ca4",xPercentagePosition:15,yPercentagePosition:8.333333333333332,widthPercentage:20,heightPercentage:33.33333333333335,topicImage:{path:""},label:"",description:""},{id:"461c2820-da07-43bb-8d14-a798c396fd7a",xPercentagePosition:45,yPercentagePosition:8.333333333333332,widthPercentage:45,heightPercentage:83.33333333333331,topicImage:{path:""},label:"",description:""},{id:"8123ecbf-d416-42a5-8106-47b440de51ec",xPercentagePosition:15,yPercentagePosition:50,widthPercentage:20,heightPercentage:25,topicImage:{path:""},label:"",description:""}],arrowItems:[],colorTheme:_src_types_ColorTheme__WEBPACK_IMPORTED_MODULE_1__.U.Blue}},passReadies:!1,commonFields:{},$form:null,$common:null,$commonButton:null,zebra:"odd",offset:{top:59.234375,left:0},currentLibrary:"H5P.TopicMap 0.1",metadata:{license:"U",title:"Topic Map 3",authors:[],changes:[],extraTitle:"Topic Map 3"},metadataForm:null,children:[],readies:[],ready:function ready(callback){return callback()},parent:null,addLanguages:function addLanguages(langCode){},removeLanguages:function removeLanguages(langCode){}}},"./src/components/Arrow/Arrow.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>Arrow});var react=__webpack_require__("./node_modules/react/index.js"),H5P_util=__webpack_require__("./src/H5P/H5P.util.ts"),ArrowType=__webpack_require__("./src/types/ArrowType.ts"),arrow_utils=__webpack_require__("./src/utils/arrow.utils.ts"),grid_utils=__webpack_require__("./src/utils/grid.utils.ts"),ContextMenu=__webpack_require__("./src/components/ContextMenu/ContextMenu.tsx"),Dialog=__webpack_require__("./src/components/Dialog/Dialog.tsx");const Arrow_module_arrow="Arrow-module__arrow--yInZR",Arrow_module_arrowSvg="Arrow-module__arrowSvg--kbG4M",Arrow_module_path="Arrow-module__path--rZfYA",Arrow_module_selectable="Arrow-module__selectable--nRWTJ",Arrow_module_pathSelected="Arrow-module__pathSelected--ivuJF",Arrow_module_deleteConfirmationPositive="Arrow-module__deleteConfirmationPositive--BIFym",Arrow_module_deleteConfirmationNegative="Arrow-module__deleteConfirmationNegative--FSdgR",Arrow_module_deleteConfirmationButtons="Arrow-module__deleteConfirmationButtons--ZgGjj";var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Arrow=function Arrow(_ref){var _item$breakpoints$map,_item$breakpoints,item=_ref.item,cellSize=_ref.cellSize,gapSize=_ref.gapSize,editItem=_ref.editItem,deleteItem=_ref.deleteItem,selectedItemId=_ref.selectedItemId,setSelectedItemId=_ref.setSelectedItemId,updateArrowType=_ref.updateArrowType,gridWidth=_ref.gridWidth,arrowStartId=_ref.arrowStartId,_React$useState2=_slicedToArray(react.useState(!1),2),showDeleteConfirmationDialog=_React$useState2[0],setShowDeleteConfirmationDialog=_React$useState2[1],confirmDeletion=react.useCallback((function(){deleteItem(item.id),setShowDeleteConfirmationDialog(!1)}),[deleteItem,item.id]),denyDeletion=react.useCallback((function(){setShowDeleteConfirmationDialog(!1)}),[]),contextMenuActions=react.useMemo((function(){var editAction={icon:ContextMenu.B.Edit,label:(0,H5P_util.t)("context-menu_edit"),onClick:function onClick(){return editItem(item.id)}},deleteAction={icon:ContextMenu.B.Delete,label:(0,H5P_util.t)("context-menu_delete"),onClick:function onClick(){return setShowDeleteConfirmationDialog(!0)}};return[editAction,{icon:ContextMenu.B.ArrowDirectional,label:(0,H5P_util.t)("context-menu_arrow-directional"),onClick:function onClick(){return updateArrowType(ArrowType.n.Directional,item.id)}},{icon:ContextMenu.B.ArrowBiDirectional,label:(0,H5P_util.t)("context-menu_arrow-bi-directional"),onClick:function onClick(){return updateArrowType(ArrowType.n.BiDirectional,item.id)}},{icon:ContextMenu.B.ArrowNonDirectional,label:(0,H5P_util.t)("context-menu_arrow-non-directional"),onClick:function onClick(){return updateArrowType(ArrowType.n.NonDirectional,item.id)}},deleteAction]}),[editItem,item.id,updateArrowType]),isHorizontal=null==item.startPosition||null==item.endPosition||Math.abs(item.startPosition.x-item.endPosition.x)>Math.abs(item.startPosition.y-item.endPosition.y),startPos={x:.5*(cellSize+gapSize),y:1.5*(cellSize+gapSize)},endPos={x:6.5*(cellSize+gapSize),y:1.5*(cellSize+gapSize)};if(null!=item.startGridPosition&&null!=item.endGridPosition){var xAdjustStart=(0,arrow_utils._b)(item,isHorizontal),yAdjustStart=(0,arrow_utils.JZ)(item,isHorizontal),xAdjust=(0,arrow_utils.w3)(item),yAdjust=(0,arrow_utils.fj)(item);startPos={x:(item.startGridPosition.x+xAdjustStart)*(cellSize+gapSize),y:(item.startGridPosition.y+yAdjustStart)*(cellSize+gapSize)},endPos={x:(item.endGridPosition.x+xAdjust)*(cellSize+gapSize),y:(item.endGridPosition.y+yAdjust)*(cellSize+gapSize)}}var pathDef="M ".concat(startPos.x," ").concat(startPos.y," ").concat(null!==(_item$breakpoints$map=null===(_item$breakpoints=item.breakpoints)||void 0===_item$breakpoints?void 0:_item$breakpoints.map((function toPathElement(position){return"L ".concat((position.x-.5)*(cellSize+gapSize)," ").concat((position.y-.5)*(cellSize+gapSize))})).join(" "))&&void 0!==_item$breakpoints$map?_item$breakpoints$map:""," L ").concat(endPos.x," ").concat(endPos.y),contextMenuPosition={x:isHorizontal?(startPos.x+endPos.x)/2:endPos.x-2*(cellSize+gapSize),y:isHorizontal?endPos.y-1*(cellSize+gapSize):(startPos.y+endPos.y)/2};return(0,jsx_runtime.jsxs)("div",{className:Arrow_module_arrow,children:[(0,jsx_runtime.jsxs)("svg",{className:Arrow_module_arrowSvg,children:[(0,jsx_runtime.jsxs)("defs",{children:[(0,jsx_runtime.jsx)("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"10",refX:"0.7",refY:"1",orient:"auto",children:(0,jsx_runtime.jsx)("path",{d:"M0,0 L0,2 L1.5,1 z",fill:"var(--theme-color-4)",onClick:function onClick(){return setSelectedItemId(item.id)}})}),(0,jsx_runtime.jsx)("marker",{id:"arrowtail",markerWidth:"10",markerHeight:"10",refX:"0.7",refY:"1",orient:"auto-start-reverse",children:(0,jsx_runtime.jsx)("path",{d:"M0,0 L0,2 L1.5,1 z",fill:"var(--theme-color-4)",onClick:function onClick(){return setSelectedItemId(item.id)}})})]}),(0,jsx_runtime.jsx)("path",{className:"".concat(null===selectedItemId?Arrow_module_path:Arrow_module_pathSelected," ").concat(null===arrowStartId?Arrow_module_selectable:""),d:pathDef,fill:"transparent",stroke:"var(--theme-color-4)",strokeWidth:.66*cellSize,markerEnd:item.arrowType===ArrowType.n.BiDirectional||item.arrowType===ArrowType.n.Directional?"url(#arrowhead)":"",markerStart:item.arrowType===ArrowType.n.BiDirectional?"url(#arrowtail)":"",onClick:function onClick(){return setSelectedItemId(item.id)},onDoubleClick:function onDoubleClick(){return editItem(item.id)}})]}),(0,jsx_runtime.jsx)(ContextMenu.x,{actions:contextMenuActions,show:selectedItemId===item.id,turnLeft:(0,grid_utils.uk)(contextMenuPosition.x,gridWidth),x:contextMenuPosition.x,y:contextMenuPosition.y,gridWidth}),(0,jsx_runtime.jsx)(Dialog.V,{isOpen:showDeleteConfirmationDialog,title:(0,H5P_util.t)("draggable_delete-confirmation"),onOpenChange:setShowDeleteConfirmationDialog,size:"medium",children:(0,jsx_runtime.jsxs)("div",{className:Arrow_module_deleteConfirmationButtons,children:[(0,jsx_runtime.jsx)("button",{type:"button",className:Arrow_module_deleteConfirmationPositive,onClick:confirmDeletion,children:(0,H5P_util.t)("draggable_delete-positive")}),(0,jsx_runtime.jsx)("button",{type:"button",className:Arrow_module_deleteConfirmationNegative,onClick:denyDeletion,children:(0,H5P_util.t)("draggable_delete-negative")})]})})]})};Arrow.displayName="Arrow";try{Arrow.displayName="Arrow",Arrow.__docgenInfo={description:"",displayName:"Arrow",props:{cellSize:{defaultValue:null,description:"",name:"cellSize",required:!0,type:{name:"number"}},gapSize:{defaultValue:null,description:"",name:"gapSize",required:!0,type:{name:"number"}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"ArrowItemType"}},editItem:{defaultValue:null,description:"",name:"editItem",required:!0,type:{name:"(itemId: string) => void"}},deleteItem:{defaultValue:null,description:"",name:"deleteItem",required:!0,type:{name:"(itemId: string) => void"}},selectedItemId:{defaultValue:null,description:"",name:"selectedItemId",required:!0,type:{name:"string | null"}},setSelectedItemId:{defaultValue:null,description:"",name:"setSelectedItemId",required:!0,type:{name:"(itemId: string) => void"}},updateArrowType:{defaultValue:null,description:"",name:"updateArrowType",required:!0,type:{name:"(type: ArrowType, itemId: string) => void"}},gridWidth:{defaultValue:null,description:"",name:"gridWidth",required:!0,type:{name:"number"}},arrowStartId:{defaultValue:null,description:"",name:"arrowStartId",required:!0,type:{name:"string | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Arrow/Arrow.tsx#Arrow"]={docgenInfo:Arrow.__docgenInfo,name:"Arrow",path:"src/components/Arrow/Arrow.tsx#Arrow"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Grid/Grid.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>Grid});var h5p_utils_es=__webpack_require__("./node_modules/h5p-utils/dist/h5p-utils.es.js"),react=__webpack_require__("./node_modules/react/index.js");const esm_useEffectOnce=function(effect){(0,react.useEffect)(effect,[])};var H5P_util=__webpack_require__("./src/H5P/H5P.util.ts"),ArrowType=__webpack_require__("./src/types/ArrowType.ts"),arrow_utils=__webpack_require__("./src/utils/arrow.utils.ts"),grid_utils=__webpack_require__("./src/utils/grid.utils.ts"),Arrow=__webpack_require__("./src/components/Arrow/Arrow.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),ArrowIndicator=function ArrowIndicator(_ref){var position=_ref.position,cellSize=_ref.cellSize,gapSize=_ref.gapSize,placement={x:(position.x-.5)*(cellSize+gapSize),y:(position.y-.5)*(cellSize+gapSize)};return(0,jsx_runtime.jsx)("circle",{cx:placement.x,cy:placement.y,r:cellSize/3,strokeWidth:"2",stroke:"var(--theme-color-4)",fill:"var(--theme-color-3)"})};ArrowIndicator.displayName="ArrowIndicator";try{ArrowIndicator.displayName="ArrowIndicator",ArrowIndicator.__docgenInfo={description:"",displayName:"ArrowIndicator",props:{position:{defaultValue:null,description:"",name:"position",required:!0,type:{name:"Position"}},cellSize:{defaultValue:null,description:"",name:"cellSize",required:!0,type:{name:"number"}},gapSize:{defaultValue:null,description:"",name:"gapSize",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ArrowIndicator/ArrowIndicator.tsx#ArrowIndicator"]={docgenInfo:ArrowIndicator.__docgenInfo,name:"ArrowIndicator",path:"src/components/ArrowIndicator/ArrowIndicator.tsx#ArrowIndicator"})}catch(__react_docgen_typescript_loader_error){}const ArrowIndicator_module_arrowSvg="ArrowIndicator-module__arrowSvg--kLvg_";var ArrowIndicatorContainer=function ArrowIndicatorContainer(_ref){var arrowIndicators=_ref.arrowIndicators,breakpoints=_ref.breakpoints,cellSize=_ref.cellSize,gapSize=_ref.gapSize,currentMousePosition=_ref.currentMousePosition,toPathElement=function toPathElement(position){return"".concat((position.x-.5)*(cellSize+gapSize)," ").concat((position.y-.5)*(cellSize+gapSize))},pathDef=breakpoints&&breakpoints.length>0?"M ".concat(toPathElement(breakpoints[0])," ").concat(breakpoints.map((function(pos){return"L ".concat(toPathElement(pos))})).join(" ")," ").concat(currentMousePosition?"L ".concat(toPathElement(currentMousePosition)):""):"";return(0,jsx_runtime.jsxs)("svg",{className:ArrowIndicator_module_arrowSvg,children:[arrowIndicators,(0,jsx_runtime.jsx)("path",{d:pathDef,fill:"transparent",stroke:"var(--theme-color-4)",strokeOpacity:.5,strokeWidth:.66*cellSize})]})};ArrowIndicatorContainer.displayName="ArrowIndicatorContainer";try{ArrowIndicatorContainer.displayName="ArrowIndicatorContainer",ArrowIndicatorContainer.__docgenInfo={description:"",displayName:"ArrowIndicatorContainer",props:{arrowIndicators:{defaultValue:null,description:"",name:"arrowIndicators",required:!0,type:{name:"Element[]"}},breakpoints:{defaultValue:null,description:"",name:"breakpoints",required:!0,type:{name:"Position[]"}},cellSize:{defaultValue:null,description:"",name:"cellSize",required:!0,type:{name:"number"}},gapSize:{defaultValue:null,description:"",name:"gapSize",required:!0,type:{name:"number"}},currentMousePosition:{defaultValue:null,description:"",name:"currentMousePosition",required:!0,type:{name:"Position | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ArrowIndicator/ArrowIndicatorContainer.tsx#ArrowIndicatorContainer"]={docgenInfo:ArrowIndicatorContainer.__docgenInfo,name:"ArrowIndicatorContainer",path:"src/components/ArrowIndicator/ArrowIndicatorContainer.tsx#ArrowIndicatorContainer"})}catch(__react_docgen_typescript_loader_error){}var Draggable=__webpack_require__("./src/components/Draggable/Draggable.tsx"),GridIndicator=__webpack_require__("./src/components/GridIndicator/GridIndicator.tsx"),Toolbar=__webpack_require__("./src/components/Toolbar/Toolbar.tsx"),TopicMapItem=__webpack_require__("./src/components/TopicMapItem/TopicMapItem.tsx");const Grid_module_grid="Grid-module__grid--fFABg",Grid_module_gridIndicatorsActive="Grid-module__gridIndicatorsActive--jqdHD",Grid_module_isCreatingArrow="Grid-module__isCreatingArrow--Ju18O";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Grid=function Grid(_ref){var numberOfColumns=_ref.numberOfColumns,numberOfRows=_ref.numberOfRows,initialItems=_ref.initialItems,updateItems=_ref.updateItems,initialArrowItems=_ref.initialArrowItems,updateArrowItems=_ref.updateArrowItems,updateGridDimensions=_ref.updateGridDimensions,gapSize=_ref.gapSize,setActiveTool=_ref.setActiveTool,activeTool=_ref.activeTool,setEditedItem=_ref.setEditedItem,setEditedArrow=_ref.setEditedArrow,setSelectedItem=_ref.setSelectedItem,selectedItem=_ref.selectedItem,openDeleteDialogue=_ref.openDeleteDialogue,updateGrid=_ref.updateGrid,currentItemsLength=_ref.currentItemsLength,setCurrentItemsLength=_ref.setCurrentItemsLength,_useState2=_slicedToArray((0,react.useState)(null),2),size=_useState2[0],setSize=_useState2[1],_useState4=_slicedToArray((0,react.useState)(initialItems),2),items=_useState4[0],setItems=_useState4[1],_useState6=_slicedToArray((0,react.useState)(null!=initialArrowItems?initialArrowItems:[]),2),arrowItems=_useState6[0],setArrowItems=_useState6[1],_useState8=_slicedToArray((0,react.useState)([]),2),occupiedCells=_useState8[0],setOccupiedCells=_useState8[1],_useState10=_slicedToArray((0,react.useState)(null),2),boxStartIndex=_useState10[0],setBoxStartIndex=_useState10[1],_useState12=_slicedToArray((0,react.useState)(!1),2),isDragging=_useState12[0],setIsDragging=_useState12[1],_useState14=_slicedToArray((0,react.useState)(null),2),resizedItemId=_useState14[0],setResizedItemId=_useState14[1],_useState16=_slicedToArray((0,react.useState)("none"),2),resizeDirectionLock=_useState16[0],setResizeDirectionLock=_useState16[1],_useState18=_slicedToArray((0,react.useState)(!1),2),mouseOutsideGrid=_useState18[0],setMouseOutsideGrid=_useState18[1],_useState20=_slicedToArray((0,react.useState)(null),2),prevIndex=_useState20[0],setPrevIndex=_useState20[1],_useState22=_slicedToArray((0,react.useState)([]),2),arrowIndicators=_useState22[0],setArrowIndicators=_useState22[1],_useState24=_slicedToArray((0,react.useState)(null),2),arrowStartId=_useState24[0],setArrowStartId=_useState24[1],_useState26=_slicedToArray((0,react.useState)(null),2),ahPreviewGridPosition=_useState26[0],setAhPreviewGridPosition=_useState26[1],updateLocalGrid=function updateLocalGrid(newItems){setItems(newItems)},_useState28=_slicedToArray((0,react.useState)(null),2),currentMousePosition=_useState28[0],setCurrentMousePosition=_useState28[1];esm_useEffectOnce((function(){updateGrid.current=updateLocalGrid,updateGridDimensions({numberOfColumns,numberOfRows})}));var elementRef=(0,react.useRef)(null);(0,react.useEffect)((function(){setAhPreviewGridPosition(null),setArrowStartId(null),setArrowIndicators([]),setCurrentMousePosition(null)}),[activeTool]);var getCellSize=(0,react.useCallback)((function(){if(!elementRef.current)return 0;var gridIndicator=elementRef.current.querySelector(".grid-indicator");if(!gridIndicator)throw new Error("No grid indicators were rendered.");var width=gridIndicator.getBoundingClientRect().width;return Math.round(width*Math.pow(10,4))/Math.pow(10,4)}),[size]),cellSize=(0,react.useMemo)(getCellSize,[gapSize,getCellSize,elementRef.current]),updateItemSize=(0,react.useCallback)((function(updatedItem,newSize){if(!size)throw new Error("Grid has no size.");var newItems=(0,grid_utils.$G)(items,updatedItem,size.width,size.height,{newSize});updateItems(newItems),setItems(newItems),setOccupiedCells((0,grid_utils.uf)(items.map((function(item){return(0,grid_utils.o2)(item,size,cellSize)})),size.width,size.height,gapSize,cellSize))}),[gapSize,cellSize,items,size,updateItems]),createArrow=(0,react.useCallback)((function(elementId,pointerPosition){if(activeTool===Toolbar.S.CreateArrow){var gridIndicator=document.elementsFromPoint(pointerPosition.x,pointerPosition.y).find((function(element){return element.classList.contains("grid-indicator")})),gridPosition={x:parseInt(gridIndicator.dataset.x,10),y:parseInt(gridIndicator.dataset.y,10)};if(!!!arrowStartId)return setArrowStartId(elementId),setAhPreviewGridPosition(gridPosition),void setArrowIndicators([gridPosition]);if(!(arrowStartId===elementId)&&arrowStartId&&null!==ahPreviewGridPosition){var arrowType=ArrowType.n.Directional,label=(0,arrow_utils.id)(arrowStartId,elementId,arrowType,items),adjustedStartGridPosition=(0,arrow_utils.vX)(ahPreviewGridPosition,gridPosition,arrowType),cellsOfItem=occupiedCells.filter((function(c){return c.occupiedById===elementId})),endPosition=(0,arrow_utils.L_)(arrowIndicators.slice(-1)[0],gridPosition,cellsOfItem,numberOfColumns),adjustedEndGridPosition=(0,arrow_utils.nr)(arrowIndicators.slice(-1)[0],endPosition,arrowType),newItem=(0,grid_utils.i6)(arrowStartId,elementId,label,arrowType,(0,grid_utils.FS)(adjustedStartGridPosition,numberOfColumns,numberOfRows),(0,grid_utils.FS)(adjustedEndGridPosition,numberOfColumns,numberOfRows),ahPreviewGridPosition,endPosition,arrowIndicators.slice(1),arrowIndicators.slice(1).map((function(breakpointPosition){return(0,grid_utils.FS)({x:breakpointPosition.x-.5,y:breakpointPosition.y-.5},numberOfColumns,numberOfRows)}))),_newItems=[].concat(_toConsumableArray(arrowItems),[newItem]);updateArrowItems(_newItems),setArrowItems(_newItems)}else setArrowStartId(null),setAhPreviewGridPosition(null),setArrowIndicators([]);setArrowIndicators([]),setArrowStartId(null),setAhPreviewGridPosition(null)}}),[activeTool,arrowStartId,ahPreviewGridPosition,items,occupiedCells,numberOfColumns,arrowIndicators,numberOfRows,arrowItems,updateArrowItems]),createBoxStart=(0,react.useCallback)((function(index){activeTool===Toolbar.S.CreateBox&&(setBoxStartIndex(index),setIsDragging(!0))}),[activeTool]),createBoxEnd=(0,react.useCallback)((function(){activeTool===Toolbar.S.CreateBox&&(setIsDragging(!1),setBoxStartIndex(null),setCurrentItemsLength(items.length))}),[activeTool,items.length,setCurrentItemsLength]),indicatorClicked=(0,react.useCallback)((function(index){if(activeTool===Toolbar.S.CreateBox&&createBoxStart(index),activeTool===Toolbar.S.CreateArrow&&null!==arrowStartId){var newArrowIndicators=[].concat(_toConsumableArray(arrowIndicators),[{y:Math.floor(index/numberOfColumns)+1,x:index%numberOfColumns+1}]);setArrowIndicators(newArrowIndicators)}}),[activeTool,arrowIndicators,arrowStartId,createBoxStart,numberOfColumns]),resizeBoxEnd=(0,react.useCallback)((function(){setPrevIndex(null),setResizedItemId(null),setBoxStartIndex(null),setResizeDirectionLock("none")}),[]),createBoxEnter=(0,react.useCallback)((function(indicatorIndex){if(activeTool===Toolbar.S.CreateBox&&isDragging){if(null==boxStartIndex)throw new Error("Box start position is not defined.");if(!size)throw new Error("Grid has no size.");var dragLeft=(0,grid_utils.A0)(indicatorIndex,boxStartIndex,numberOfColumns),dragUp=(0,grid_utils.bP)(indicatorIndex,boxStartIndex,numberOfColumns,numberOfRows),x=dragLeft?indicatorIndex%numberOfColumns:boxStartIndex%numberOfColumns,y=dragUp?Math.floor(indicatorIndex/numberOfColumns):Math.floor(boxStartIndex/numberOfColumns),xPercentagePosition=x/numberOfColumns*100,yPercentagePosition=y/numberOfRows*100,heightPercentage=((dragUp?Math.floor(boxStartIndex/numberOfColumns):Math.floor(indicatorIndex/numberOfColumns))+1)/numberOfRows*100-yPercentagePosition,indicatorValue=dragLeft?boxStartIndex+1:indicatorIndex+1,widthPercentage=(indicatorValue%numberOfColumns==0?100:indicatorValue%numberOfColumns/numberOfColumns*100)-xPercentagePosition,alreadyAdded=items.length!==currentItemsLength&&null!=items[currentItemsLength],newItem=(0,grid_utils.zj)();newItem.xPercentagePosition=xPercentagePosition,newItem.widthPercentage=widthPercentage,newItem.yPercentagePosition=yPercentagePosition,newItem.heightPercentage=heightPercentage;var newPosition={x:(0,grid_utils.kl)(xPercentagePosition,size.width),y:(0,grid_utils.kl)(yPercentagePosition,size.height)},newSize={width:(0,grid_utils.U8)(widthPercentage,size.width,cellSize),height:(0,grid_utils.U8)(heightPercentage,size.height,cellSize)},lastItem=items[currentItemsLength],posIsFree=(0,grid_utils.vN)(newPosition,alreadyAdded?lastItem.id:newItem.id,newSize,size,gapSize,cellSize,occupiedCells);if(posIsFree&&!alreadyAdded){var _newItems2=[].concat(_toConsumableArray(items),[newItem]);updateItems(_newItems2),setItems(_newItems2)}if(posIsFree&&alreadyAdded)if(dragLeft||dragUp){var _newItems3=(0,grid_utils.$G)(items,lastItem,size.width,size.height,{newPosition,newSize});updateItems(_newItems3),setItems(_newItems3)}else updateItemSize(lastItem,newSize)}}),[activeTool,isDragging,boxStartIndex,size,numberOfColumns,numberOfRows,currentItemsLength,items,gapSize,cellSize,occupiedCells,updateItems,updateItemSize]),resizeBoxEnter=(0,react.useCallback)((function(indicatorIndex){var isResizing=null!=resizedItemId;if(isResizing){if(null==boxStartIndex)throw new Error("Box start position is not defined.");if(!size)throw new Error("Grid has no size.");var existingItem=(0,grid_utils.i$)(resizedItemId,items);if(!existingItem)throw new Error('Resized item with id "'.concat(resizedItemId,'" does not exist'));var dragLeft=indicatorIndex%numberOfColumns<(null!=prevIndex?prevIndex:indicatorIndex)%numberOfColumns,dragUp=(null!=prevIndex?prevIndex:indicatorIndex)>=indicatorIndex,onlyScaleVertically=resizeDirectionLock.includes("horizontal"),onlyScaleHorizontally=resizeDirectionLock.includes("vertical"),leftHandle=resizeDirectionLock.includes("left"),topHandle=resizeDirectionLock.includes("top"),x=leftHandle?indicatorIndex%numberOfColumns:boxStartIndex%numberOfColumns,y=topHandle?Math.floor(indicatorIndex/numberOfColumns):Math.floor(boxStartIndex/numberOfColumns),xPercentagePosition=onlyScaleVertically?existingItem.xPercentagePosition:x/numberOfColumns*100,yPercentagePosition=onlyScaleHorizontally?existingItem.yPercentagePosition:y/numberOfRows*100,yEndPercentagePosition=((topHandle?Math.floor((boxStartIndex+existingItem.widthPercentage)/numberOfColumns):Math.floor(indicatorIndex/numberOfColumns))+1)/numberOfRows*100,heightPercentage=(0,grid_utils.y8)(onlyScaleHorizontally,topHandle,dragUp,existingItem,yPercentagePosition,yEndPercentagePosition),indicatorValue=indicatorIndex+1,xEndPercentagePosition=indicatorValue%numberOfColumns==0?100:indicatorValue%numberOfColumns/numberOfColumns*100,widthPercentage=(0,grid_utils.Ow)(onlyScaleVertically,leftHandle,dragLeft,existingItem,xPercentagePosition,xEndPercentagePosition),newPosition={x:(0,grid_utils.kl)(xPercentagePosition,size.width),y:(0,grid_utils.kl)(yPercentagePosition,size.height)},newSize={width:(0,grid_utils.U8)(widthPercentage,size.width,cellSize),height:(0,grid_utils.U8)(heightPercentage,size.height,cellSize)};if((0,grid_utils.gY)(widthPercentage,size.width,heightPercentage,size.height)&&(newPosition={x:(0,grid_utils.kl)(existingItem.xPercentagePosition,size.width),y:(0,grid_utils.kl)(existingItem.yPercentagePosition,size.height)}),setPrevIndex(indicatorIndex),(0,grid_utils.vN)(newPosition,existingItem.id,newSize,size,gapSize,cellSize,occupiedCells)&&isResizing)if(leftHandle||topHandle){var _newItems4=(0,grid_utils.$G)(items,existingItem,size.width,size.height,{newPosition,newSize});updateItems(_newItems4),setItems(_newItems4)}else updateItemSize(existingItem,newSize)}}),[resizedItemId,boxStartIndex,size,numberOfColumns,numberOfRows,items,gapSize,cellSize,occupiedCells,updateItems,resizeDirectionLock,updateItemSize,prevIndex]),cancelActions=(0,react.useCallback)((function(){var isCreatingNewBox=activeTool===Toolbar.S.CreateBox&&isDragging,isResizing=null!=resizedItemId;isCreatingNewBox&&createBoxEnd(),isResizing&&resizeBoxEnd(),mouseOutsideGrid||setMouseOutsideGrid(!0)}),[activeTool,isDragging,resizedItemId,createBoxEnd,resizeBoxEnd,mouseOutsideGrid]),activeHoverOnGrid=(0,react.useMemo)((function(){return activeTool===Toolbar.S.CreateBox}),[activeTool]),onGridIndicatorMouseEnter=(0,react.useCallback)((function(indicatorIndex){null!=resizedItemId&&resizeBoxEnter(indicatorIndex),activeTool===Toolbar.S.CreateBox&&createBoxEnter(indicatorIndex),activeTool===Toolbar.S.CreateArrow&&null!=arrowStartId&&setCurrentMousePosition({y:Math.floor(indicatorIndex/numberOfColumns)+1,x:indicatorIndex%numberOfColumns+1})}),[activeTool,arrowStartId,createBoxEnter,numberOfColumns,resizeBoxEnter,resizedItemId]),gridIndicators=(0,react.useMemo)((function(){var label=(0,H5P_util.t)("grid-indicator_label");return Array(numberOfColumns*numberOfRows).fill(null).map((function(_,index){return{id:h5p_utils_es.gX.createUUID(),label,index}}))}),[numberOfColumns,numberOfRows]),gridIndicatorElements=(0,react.useMemo)((function(){return gridIndicators.map((function(_ref2){var id=_ref2.id,index=_ref2.index,label=_ref2.label;return(0,jsx_runtime.jsx)(GridIndicator.c,{onMouseDown:function onMouseDown(){return indicatorClicked(index)},onMouseEnter:function onMouseEnter(){return onGridIndicatorMouseEnter(index)},label,position:{y:Math.floor(index/numberOfColumns)+1,x:index%numberOfColumns+1}},id)}))}),[gridIndicators,numberOfColumns,indicatorClicked,onGridIndicatorMouseEnter]),updateItemPosition=(0,react.useCallback)((function(updatedItem,newPosition){if(!size)throw new Error("Grid has no size.");if(activeTool!==Toolbar.S.CreateArrow){var newItems=(0,grid_utils.$G)(items,updatedItem,size.width,size.height,{newPosition});updateItems(newItems),setItems(newItems);var elements=items.map((function(item){return(0,grid_utils.o2)(item,size,cellSize)})),newOccupiedCells=(0,grid_utils.uf)(elements,size.width,size.height,gapSize,cellSize);setOccupiedCells(newOccupiedCells)}}),[size,activeTool,items,updateItems,gapSize,cellSize]),editItem=(0,react.useCallback)((function(id){activeTool&&setActiveTool(null),setEditedItem(id)}),[activeTool,setActiveTool,setEditedItem]),editArrow=(0,react.useCallback)((function(id){activeTool&&setActiveTool(null),setEditedArrow(id)}),[activeTool,setActiveTool,setEditedArrow]),deleteArrow=(0,react.useCallback)((function(id){var newArrowItems=arrowItems.filter((function(item){return item.id!==id}));updateArrowItems(newArrowItems),setArrowItems(newArrowItems)}),[arrowItems,updateArrowItems]),_startResize=(0,react.useCallback)((function(item,directionLock){var x=Math.floor(item.xPercentagePosition/100*numberOfColumns),y=Math.floor(item.yPercentagePosition/100*numberOfRows);setBoxStartIndex(x+y*numberOfColumns),setResizedItemId(item.id),setResizeDirectionLock(directionLock),updateGridDimensions({numberOfColumns,numberOfRows})}),[numberOfColumns,numberOfRows,updateGridDimensions]),setArrowType=(0,react.useCallback)((function(type,id){var updatedItem=arrowItems.find((function(item){return item.id===id}));if(!updatedItem)throw new Error('Updated arrow with id "'.concat(id,'" does not exist'));if(updatedItem){var newItem=(0,arrow_utils.hi)(arrowItems,updatedItem,type,items,{numberOfColumns,numberOfRows});updateArrowItems(newItem),setArrowItems(newItem)}}),[arrowItems,items,updateArrowItems,numberOfColumns,numberOfRows]),children=(0,react.useMemo)((function(){return null==size?null:items.map((function(item){return(0,jsx_runtime.jsx)(Draggable._,{id:item.id,initialXPosition:(0,grid_utils.kl)(item.xPercentagePosition,size.width),initialYPosition:(0,grid_utils.kl)(item.yPercentagePosition,size.height),updatePosition:function updatePosition(newPosition){return updateItemPosition(item,newPosition)},initialWidth:Math.abs((0,grid_utils.kl)(item.widthPercentage,size.width)),initialHeight:Math.abs((0,grid_utils.kl)(item.heightPercentage,size.height)),gapSize,cellSize,gridSize:size,occupiedCells,isPreview:isDragging,editItem,openDeleteDialogue,setSelectedItem,selectedItem,startResize:function startResize(directionLock){return _startResize(item,directionLock)},mouseOutsideGrid,showScaleHandles:!0,onPointerDown:function onPointerDown(pointerPosition){return createArrow(item.id,pointerPosition)},activeTool,children:(0,jsx_runtime.jsx)(TopicMapItem.d,{item})},item.id)}))}),[size,items,gapSize,cellSize,occupiedCells,isDragging,editItem,openDeleteDialogue,setSelectedItem,selectedItem,mouseOutsideGrid,activeTool,updateItemPosition,_startResize,createArrow]),renderArrow=(0,react.useCallback)((function(item){return size?(0,jsx_runtime.jsx)(Arrow.E,{cellSize,gapSize,item,editItem:editArrow,deleteItem:deleteArrow,selectedItemId:selectedItem,setSelectedItemId:setSelectedItem,updateArrowType:setArrowType,gridWidth:size.width,arrowStartId},item.id):null}),[cellSize,deleteArrow,editArrow,gapSize,selectedItem,setArrowType,setSelectedItem,size,arrowStartId]),childrenArrows=(0,react.useMemo)((function(){return arrowItems.map((function(item){return renderArrow(item)}))}),[arrowItems,renderArrow]),childrenArrowIndicators=(0,react.useMemo)((function(){return arrowIndicators.map((function(position){return(0,jsx_runtime.jsx)(ArrowIndicator,{position,cellSize,gapSize},"".concat(position.x,"-").concat(position.y))}))}),[arrowIndicators,cellSize,gapSize]),resize=(0,react.useCallback)((function(){window.requestAnimationFrame((function(){if(elementRef.current){var _elementRef$current$g=elementRef.current.getBoundingClientRect(),width=_elementRef$current$g.width,height=_elementRef$current$g.height;if(!(null==size)){var scaleFactor=size.width/width;1!==scaleFactor&&setItems((0,grid_utils.Ot)(items,scaleFactor))}setSize({width,height})}}))}),[items,size]);esm_useEffectOnce((function(){var windowClickListener=function windowClickListener(event){!!event.target.closest(".draggable, .arrow-item, .context-menu-button, .scaleHandle")||setSelectedItem(null)};window.addEventListener("resize",resize),window.addEventListener("mousedown",windowClickListener),window.addEventListener("touchstart",windowClickListener),resize()})),(0,react.useEffect)((function(){resize()}),[numberOfColumns,numberOfRows]),(0,react.useEffect)((function(){size&&setOccupiedCells((0,grid_utils.uf)(items.map((function(item){return(0,grid_utils.o2)(item,size,cellSize)})),size.width,size.height,gapSize,cellSize))}),[gapSize,cellSize,items,size]);var className=Grid_module_grid;return activeHoverOnGrid&&(className+=" ".concat(Grid_module_gridIndicatorsActive)),activeTool===Toolbar.S.CreateArrow&&(className+=" ".concat(Grid_module_isCreatingArrow)),(0,react.useEffect)((function(){selectedItem||setMouseOutsideGrid(!1)}),[selectedItem]),(0,jsx_runtime.jsxs)("div",{ref:elementRef,role:"application",className,style:{"--gap-size":"".concat(gapSize,"px"),gridTemplateColumns:"repeat(".concat(numberOfColumns,", 1fr)"),gridTemplateRows:"repeat(".concat(numberOfRows,", 1fr)"),cursor:isDragging?"pointer":"auto"},onMouseUp:function onMouseUp(){createBoxEnd(),resizeBoxEnd()},onMouseLeave:function onMouseLeave(){return cancelActions()},onMouseEnter:function onMouseEnter(){mouseOutsideGrid&&setMouseOutsideGrid(!1)},children:[childrenArrows,children,gridIndicatorElements,(0,jsx_runtime.jsx)(ArrowIndicatorContainer,{arrowIndicators:childrenArrowIndicators,cellSize,gapSize,breakpoints:arrowIndicators,currentMousePosition})]})};Grid.displayName="Grid";try{Grid.displayName="Grid",Grid.__docgenInfo={description:"",displayName:"Grid",props:{numberOfColumns:{defaultValue:null,description:"",name:"numberOfColumns",required:!0,type:{name:"number"}},numberOfRows:{defaultValue:null,description:"",name:"numberOfRows",required:!0,type:{name:"number"}},initialItems:{defaultValue:null,description:"",name:"initialItems",required:!0,type:{name:"TopicMapItemType[]"}},updateItems:{defaultValue:null,description:"",name:"updateItems",required:!0,type:{name:"(items: TopicMapItemType[]) => void"}},initialArrowItems:{defaultValue:null,description:"",name:"initialArrowItems",required:!1,type:{name:"ArrowItemType[]"}},updateArrowItems:{defaultValue:null,description:"",name:"updateArrowItems",required:!0,type:{name:"(items: ArrowItemType[]) => void"}},updateGridDimensions:{defaultValue:null,description:"",name:"updateGridDimensions",required:!0,type:{name:"(dimensions: GridDimensions) => void"}},gapSize:{defaultValue:null,description:"",name:"gapSize",required:!0,type:{name:"number"}},setActiveTool:{defaultValue:null,description:"",name:"setActiveTool",required:!0,type:{name:"(newValue: ToolbarButtonType | null) => void"}},activeTool:{defaultValue:null,description:"",name:"activeTool",required:!0,type:{name:"ToolbarButtonType | null"}},setEditedItem:{defaultValue:null,description:"",name:"setEditedItem",required:!0,type:{name:"(itemId: string) => void"}},setEditedArrow:{defaultValue:null,description:"",name:"setEditedArrow",required:!0,type:{name:"(itemId: string) => void"}},setSelectedItem:{defaultValue:null,description:"",name:"setSelectedItem",required:!0,type:{name:"(itemId: string | null) => void"}},selectedItem:{defaultValue:null,description:"",name:"selectedItem",required:!0,type:{name:"string | null"}},openDeleteDialogue:{defaultValue:null,description:"",name:"openDeleteDialogue",required:!0,type:{name:"(itemId: string) => void"}},updateGrid:{defaultValue:null,description:"",name:"updateGrid",required:!0,type:{name:"MutableRefObject<(newItems: TopicMapItemType[]) => void>"}},currentItemsLength:{defaultValue:null,description:"",name:"currentItemsLength",required:!0,type:{name:"number"}},setCurrentItemsLength:{defaultValue:null,description:"",name:"setCurrentItemsLength",required:!0,type:{name:"(itemsLength: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Grid/Grid.tsx#Grid"]={docgenInfo:Grid.__docgenInfo,name:"Grid",path:"src/components/Grid/Grid.tsx#Grid"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/GridIndicator/GridIndicator.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>GridIndicator});var react=__webpack_require__("./node_modules/react/index.js");const GridIndicator_module_gridIndicator="GridIndicator-module__gridIndicator--pHc2y";var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),GridIndicator=react.memo((function(_ref){var onMouseDown=_ref.onMouseDown,onMouseEnter=_ref.onMouseEnter,label=_ref.label,position=_ref.position;return(0,jsx_runtime.jsx)("button",{type:"button",className:"grid-indicator ".concat(GridIndicator_module_gridIndicator),onMouseDown,onMouseEnter,onTouchStart:onMouseDown,onTouchMove:onMouseEnter,"aria-label":label,"data-grid-indicator":"true","data-x":position.x,"data-y":position.y})}),(function(prevProps,nextProps){return prevProps.onMouseDown===nextProps.onMouseDown&&prevProps.onMouseEnter===nextProps.onMouseEnter}));try{GridIndicator.displayName="GridIndicator",GridIndicator.__docgenInfo={description:"",displayName:"GridIndicator",props:{onMouseDown:{defaultValue:null,description:"",name:"onMouseDown",required:!0,type:{name:"() => void"}},onMouseEnter:{defaultValue:null,description:"",name:"onMouseEnter",required:!0,type:{name:"() => void"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},position:{defaultValue:null,description:"",name:"position",required:!0,type:{name:"Position"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/GridIndicator/GridIndicator.tsx#GridIndicator"]={docgenInfo:GridIndicator.__docgenInfo,name:"GridIndicator",path:"src/components/GridIndicator/GridIndicator.tsx#GridIndicator"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/TopicMapItem/TopicMapItem.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>TopicMapItem});var _breakpointSize,h5p_utils_es=__webpack_require__("./node_modules/h5p-utils/dist/h5p-utils.es.js"),react=__webpack_require__("./node_modules/react/index.js"),AppWidthContext=__webpack_require__("./src/contexts/AppWidthContext.ts"),BreakpointSize=function(BreakpointSize){return BreakpointSize[BreakpointSize.Large=0]="Large",BreakpointSize[BreakpointSize.Medium=1]="Medium",BreakpointSize[BreakpointSize.Small=2]="Small",BreakpointSize}({});function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var breakpointSize=(_defineProperty(_breakpointSize={},BreakpointSize.Large,1440),_defineProperty(_breakpointSize,BreakpointSize.Medium,1024),_defineProperty(_breakpointSize,BreakpointSize.Small,512),_breakpointSize);const TopicMapItem_module={topicMapItem:"TopicMapItem-module__topicMapItem--wFBpu",large:"TopicMapItem-module__large--YxStI",inner:"TopicMapItem-module__inner--PlRJo",medium:"TopicMapItem-module__medium--fH8uV",small:"TopicMapItem-module__small--F3zP0",image:"TopicMapItem-module__image--_riEm",noImage:"TopicMapItem-module__noImage--OXb2j",label:"TopicMapItem-module__label--rED26",description:"TopicMapItem-module__description--B6dBY"};var _sizeClassname,jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function TopicMapItem_typeof(obj){return TopicMapItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},TopicMapItem_typeof(obj)}function TopicMapItem_defineProperty(obj,key,value){return(key=function TopicMapItem_toPropertyKey(arg){var key=function TopicMapItem_toPrimitive(input,hint){if("object"!==TopicMapItem_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==TopicMapItem_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===TopicMapItem_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var sizeClassname=(TopicMapItem_defineProperty(_sizeClassname={},BreakpointSize.Large,TopicMapItem_module.large),TopicMapItem_defineProperty(_sizeClassname,BreakpointSize.Medium,TopicMapItem_module.medium),TopicMapItem_defineProperty(_sizeClassname,BreakpointSize.Small,TopicMapItem_module.small),_sizeClassname),TopicMapItem=function TopicMapItem(_ref){var _item$topicImage,_item$topicImageAltTe,_item$topicImage2,item=_ref.item,imageUrl=(0,h5p_utils_es.Jn)(null===(_item$topicImage=item.topicImage)||void 0===_item$topicImage?void 0:_item$topicImage.path),AppWidth=function useAppWidth(){var appWidth=(0,react.useContext)(AppWidthContext.B),isLarge=appWidth>breakpointSize[BreakpointSize.Large],isMedium=appWidth>breakpointSize[BreakpointSize.Medium];return isLarge?BreakpointSize.Large:isMedium?BreakpointSize.Medium:BreakpointSize.Small}(),className=react.useMemo((function(){return[TopicMapItem_module.topicMapItem,sizeClassname[AppWidth]].join(" ")}),[AppWidth]);return(0,jsx_runtime.jsxs)("div",{className,children:[item.topicImage&&imageUrl&&(0,jsx_runtime.jsx)("img",{className:TopicMapItem_module.image,src:imageUrl,alt:null!==(_item$topicImageAltTe=item.topicImageAltText)&&void 0!==_item$topicImageAltTe?_item$topicImageAltTe:"",width:item.topicImage.width,height:item.topicImage.height}),(0,jsx_runtime.jsxs)("div",{className:"".concat(TopicMapItem_module.inner," ").concat(null!==(_item$topicImage2=item.topicImage)&&void 0!==_item$topicImage2&&_item$topicImage2.path?"":TopicMapItem_module.noImage),children:[(0,jsx_runtime.jsx)("div",{className:TopicMapItem_module.label,dangerouslySetInnerHTML:{__html:item.label}}),item.description&&(0,jsx_runtime.jsx)("div",{className:TopicMapItem_module.description,dangerouslySetInnerHTML:{__html:item.description}})]})]})};TopicMapItem.displayName="TopicMapItem";try{TopicMapItem.displayName="TopicMapItem",TopicMapItem.__docgenInfo={description:"",displayName:"TopicMapItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"TopicMapItemTypeWithoutPositions"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/TopicMapItem/TopicMapItem.tsx#TopicMapItem"]={docgenInfo:TopicMapItem.__docgenInfo,name:"TopicMapItem",path:"src/components/TopicMapItem/TopicMapItem.tsx#TopicMapItem"})}catch(__react_docgen_typescript_loader_error){}},"./src/contexts/AppWidthContext.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>AppWidthContext});var AppWidthContext=(0,__webpack_require__("./node_modules/react/index.js").createContext)(0)}}]);